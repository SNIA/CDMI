<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>DataObject.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">cdmi-server</a> &gt; <a href="index.source.html" class="el_package">org.snia.cdmiserver.model</a> &gt; <span class="el_source">DataObject.java</span></div><h1>DataObject.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 2010, Sun Microsystems, Inc. Copyright (c) 2010, The Storage Networking Industry
 * Association.
 *
 * Redistribution and use in source and binary forms, with or without modification, are permitted
 * provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice, this list of conditions
 * and the following disclaimer.
 *
 * Redistributions in binary form must reproduce the above copyright notice, this list of conditions
 * and the following disclaimer in the documentation and/or other materials provided with the
 * distribution.
 *
 * Neither the name of The Storage Networking Industry Association (SNIA) nor the names of its
 * contributors may be used to endorse or promote products derived from this software without
 * specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR
 * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
 * FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
 * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY
 * WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

package org.snia.cdmiserver.model;

import org.json.JSONObject;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.snia.cdmiserver.util.MediaTypes;

/**
 * &lt;p&gt;
 * Representation of a CDMI &lt;em&gt;DataObject&lt;/em&gt;.
 * &lt;/p&gt;
 */
public class DataObject extends CdmiObject {

  @SuppressWarnings(&quot;unused&quot;)
<span class="fc" id="L44">  private static final Logger LOG = LoggerFactory.getLogger(DataObject.class);</span>

  private String objectType;
  private String objectName;
  private String parentUri;
  private String parentId;
  private String domainUri;
  private String capabilitiesUri;
  private String completionStatus;

  private String percentComplete;
  private JSONObject metadata;

  private String mimetype;
  private String deserializevalue;
  private String reference;
  private String move;
  private String copy;
  private String deserialize;
  private String serialize;
  private String valuetransferencoding;
  private String value;

<span class="fc" id="L67">  private DataObject() {}</span>

  /**
   * Creates a new data object with the mandatory fields.
   * 
   * @param objectName the container's name
   * @param parentUri the container's parent URI
   * @param parentId the container's parent objectId
   */
  public DataObject(String objectName, String parentUri, String parentId) {
<span class="fc" id="L77">    super();</span>
<span class="fc" id="L78">    this.objectName = objectName;</span>
<span class="fc" id="L79">    this.parentUri = parentUri;</span>
<span class="fc" id="L80">    this.parentId = parentId;</span>
    // default values
<span class="fc" id="L82">    this.objectType = MediaTypes.DATA_OBJECT;</span>
<span class="fc" id="L83">    this.domainUri = &quot;/cdmi_domains&quot;;</span>
<span class="fc" id="L84">    this.capabilitiesUri = &quot;/cdmi_capabilities/dataobject&quot;;</span>
<span class="fc" id="L85">    this.completionStatus = &quot;Processing&quot;;</span>
<span class="fc" id="L86">    this.mimetype = &quot;application/octet-stream&quot;;</span>
<span class="fc" id="L87">    this.metadata = new JSONObject();</span>
<span class="fc" id="L88">  }</span>

  public String getObjectType() {
<span class="nc" id="L91">    return objectType;</span>
  }

  public void setObjectType(String objectType) {
<span class="nc" id="L95">    this.objectType = objectType;</span>
<span class="nc" id="L96">  }</span>

  public String getObjectName() {
<span class="fc" id="L99">    return objectName;</span>
  }

  public void setObjectName(String objectName) {
<span class="nc" id="L103">    this.objectName = objectName;</span>
<span class="nc" id="L104">  }</span>

  public String getParentUri() {
<span class="nc" id="L107">    return parentUri;</span>
  }

  public void setParentUri(String parentUri) {
<span class="nc" id="L111">    this.parentUri = parentUri;</span>
<span class="nc" id="L112">  }</span>

  public String getParentId() {
<span class="nc" id="L115">    return parentId;</span>
  }

  public void setParentId(String parentId) {
<span class="nc" id="L119">    this.parentId = parentId;</span>
<span class="nc" id="L120">  }</span>

  public String getDomainUri() {
<span class="nc" id="L123">    return domainUri;</span>
  }

  public void setDomainUri(String domainUri) {
<span class="nc" id="L127">    this.domainUri = domainUri;</span>
<span class="nc" id="L128">  }</span>

  public String getCapabilitiesUri() {
<span class="nc" id="L131">    return capabilitiesUri;</span>
  }

  public void setCapabilitiesUri(String capabilitiesUri) {
<span class="nc" id="L135">    this.capabilitiesUri = capabilitiesUri;</span>
<span class="nc" id="L136">  }</span>

  public String getCompletionStatus() {
<span class="nc" id="L139">    return completionStatus;</span>
  }

  public void setCompletionStatus(String completionStatus) {
<span class="fc" id="L143">    this.completionStatus = completionStatus;</span>
<span class="fc" id="L144">  }</span>

  public String getPercentComplete() {
<span class="nc" id="L147">    return percentComplete;</span>
  }

  public void setPercentComplete(String percentComplete) {
<span class="nc" id="L151">    this.percentComplete = percentComplete;</span>
<span class="nc" id="L152">  }</span>

  public JSONObject getMetadata() {
<span class="fc" id="L155">    return metadata;</span>
  }

  public void setMetadata(JSONObject metadata) {
<span class="fc" id="L159">    this.metadata = metadata;</span>
<span class="fc" id="L160">  }</span>

  public String getDeserializedvalue() {
<span class="nc" id="L163">    return deserializevalue;</span>
  }

  public void setDeserializedvalue(String deserializevalue) {
<span class="nc" id="L167">    this.deserializevalue = deserializevalue;</span>
<span class="nc" id="L168">  }</span>

  public String getReference() {
<span class="nc" id="L171">    return reference;</span>
  }

  public void setReference(String reference) {
<span class="nc" id="L175">    this.reference = reference;</span>
<span class="nc" id="L176">  }</span>

  public String getMove() {
<span class="nc" id="L179">    return move;</span>
  }

  public void setMove(String move) {
<span class="nc" id="L183">    this.move = move;</span>
<span class="nc" id="L184">  }</span>

  public String getCopy() {
<span class="nc" id="L187">    return copy;</span>
  }

  public void setCopy(String copy) {
<span class="nc" id="L191">    this.copy = copy;</span>
<span class="nc" id="L192">  }</span>

  public String getDeserialize() {
<span class="nc" id="L195">    return deserialize;</span>
  }

  public void setDeserialize(String deserialize) {
<span class="nc" id="L199">    this.deserialize = deserialize;</span>
<span class="nc" id="L200">  }</span>

  public String getMimetype() {
<span class="nc" id="L203">    return mimetype;</span>
  }

  public void setMimetype(String mimetype) {
<span class="nc" id="L207">    this.mimetype = mimetype;</span>
<span class="nc" id="L208">  }</span>

  public String getSerialize() {
<span class="nc" id="L211">    return serialize;</span>
  }

  public void setSerialize(String serialize) {
<span class="nc" id="L215">    this.serialize = serialize;</span>
<span class="nc" id="L216">  }</span>

  public String getValuetransferencoding() {
<span class="nc" id="L219">    return valuetransferencoding;</span>
  }

  public void setValuetransferencoding(String valuetransferencoding) {
<span class="nc" id="L223">    this.valuetransferencoding = valuetransferencoding;</span>
<span class="nc" id="L224">  }</span>

  public String getValue() {
<span class="fc" id="L227">    return value;</span>
  }

  public void setValue(String value) {
<span class="nc" id="L231">    this.value = value;</span>
<span class="nc" id="L232">  }</span>

  /**
   * Deserializes a data object from the given JSON object.
   * 
   * @param json a {@link JSONObject}
   */
  public static DataObject fromJson(JSONObject json) {
<span class="fc" id="L240">    DataObject dataObject = new DataObject();</span>

<span class="fc bfc" id="L242" title="All 2 branches covered.">    if (json.has(&quot;objectID&quot;)) {</span>
<span class="fc" id="L243">      dataObject.setObjectId(json.optString(&quot;objectID&quot;));</span>
    }
<span class="fc bfc" id="L245" title="All 2 branches covered.">    if (json.has(&quot;objectName&quot;)) {</span>
<span class="fc" id="L246">      dataObject.objectName = json.optString(&quot;objectName&quot;);</span>
    }
<span class="fc bfc" id="L248" title="All 2 branches covered.">    if (json.has(&quot;parentURI&quot;)) {</span>
<span class="fc" id="L249">      dataObject.parentUri = json.optString(&quot;parentURI&quot;);</span>
    }
<span class="fc bfc" id="L251" title="All 2 branches covered.">    if (json.has(&quot;parentID&quot;)) {</span>
<span class="fc" id="L252">      dataObject.parentId = json.optString(&quot;parentID&quot;);</span>
    }
    // default values
<span class="fc" id="L255">    dataObject.objectType = MediaTypes.DATA_OBJECT;</span>

<span class="fc" id="L257">    dataObject.domainUri = json.optString(&quot;domainURI&quot;, &quot;/cdmi_domains&quot;);</span>
<span class="fc" id="L258">    dataObject.capabilitiesUri = json.optString(&quot;capabilitiesURI&quot;, &quot;/cdmi_capabilities/container&quot;);</span>
<span class="fc" id="L259">    dataObject.completionStatus = json.optString(&quot;completionStatus&quot;, &quot;Processing&quot;);</span>
<span class="fc" id="L260">    dataObject.mimetype = json.optString(&quot;mimetype&quot;, &quot;application/octet-stream&quot;);</span>
<span class="fc" id="L261">    dataObject.metadata = json.optJSONObject(&quot;metadata&quot;);</span>
<span class="fc bfc" id="L262" title="All 2 branches covered.">    if (dataObject.metadata == null) {</span>
<span class="fc" id="L263">      dataObject.metadata = new JSONObject();</span>
    }
    // optional values
<span class="pc bpc" id="L266" title="1 of 2 branches missed.">    if (json.has(&quot;percentComplete&quot;)) {</span>
<span class="nc" id="L267">      dataObject.percentComplete = json.optString(&quot;percentComplete&quot;);</span>
    }
<span class="pc bpc" id="L269" title="1 of 2 branches missed.">    if (json.has(&quot;serialize&quot;)) {</span>
<span class="nc" id="L270">      dataObject.serialize = json.optString(&quot;serialize&quot;);</span>
    }
<span class="pc bpc" id="L272" title="1 of 2 branches missed.">    if (json.has(&quot;valuetransferencoding&quot;)) {</span>
<span class="nc" id="L273">      dataObject.valuetransferencoding = json.optString(&quot;valuetransferencoding&quot;);</span>
    }
<span class="pc bpc" id="L275" title="1 of 2 branches missed.">    if (json.has(&quot;value&quot;)) {</span>
<span class="nc" id="L276">      dataObject.value = json.optString(&quot;value&quot;);</span>
    }
<span class="pc bpc" id="L278" title="1 of 2 branches missed.">    if (json.has(&quot;deserializevalue&quot;)) {</span>
<span class="nc" id="L279">      dataObject.deserializevalue = json.optString(&quot;deserializevalue&quot;);</span>
    }
<span class="pc bpc" id="L281" title="1 of 2 branches missed.">    if (json.has(&quot;reference&quot;)) {</span>
<span class="nc" id="L282">      dataObject.reference = json.optString(&quot;reference&quot;);</span>
    }
<span class="pc bpc" id="L284" title="1 of 2 branches missed.">    if (json.has(&quot;move&quot;)) {</span>
<span class="nc" id="L285">      dataObject.move = json.optString(&quot;move&quot;);</span>
    }
<span class="pc bpc" id="L287" title="1 of 2 branches missed.">    if (json.has(&quot;copy&quot;)) {</span>
<span class="nc" id="L288">      dataObject.copy = json.optString(&quot;copy&quot;);</span>
    }
<span class="pc bpc" id="L290" title="1 of 2 branches missed.">    if (json.has(&quot;deserialize&quot;)) {</span>
<span class="nc" id="L291">      dataObject.deserialize = json.optString(&quot;deserialize&quot;);</span>
    }

<span class="fc" id="L294">    return dataObject;</span>
  }

  @Override
  public JSONObject toJson() {
<span class="fc" id="L299">    JSONObject json = super.toJson();</span>

<span class="fc" id="L301">    json.putOpt(&quot;objectType&quot;, objectType);</span>
<span class="fc" id="L302">    json.putOpt(&quot;objectName&quot;, objectName);</span>
<span class="fc" id="L303">    json.putOpt(&quot;parentURI&quot;, parentUri);</span>
<span class="fc" id="L304">    json.putOpt(&quot;parentID&quot;, parentId);</span>
<span class="fc" id="L305">    json.putOpt(&quot;domainURI&quot;, domainUri);</span>
<span class="fc" id="L306">    json.putOpt(&quot;capabilitiesURI&quot;, capabilitiesUri);</span>
<span class="fc" id="L307">    json.putOpt(&quot;completionStatus&quot;, completionStatus);</span>
<span class="fc" id="L308">    json.putOpt(&quot;percentComplete&quot;, percentComplete);</span>
<span class="fc" id="L309">    json.putOpt(&quot;metadata&quot;, metadata);</span>
<span class="fc" id="L310">    json.putOpt(&quot;mimetype&quot;, mimetype);</span>
<span class="fc" id="L311">    json.putOpt(&quot;serialize&quot;, serialize);</span>
<span class="fc" id="L312">    json.putOpt(&quot;valuetransferencoding&quot;, valuetransferencoding);</span>
<span class="fc" id="L313">    json.putOpt(&quot;value&quot;, value);</span>
<span class="fc" id="L314">    json.putOpt(&quot;deserializevalue&quot;, deserializevalue);</span>
<span class="fc" id="L315">    json.putOpt(&quot;reference&quot;, reference);</span>
<span class="fc" id="L316">    json.putOpt(&quot;move&quot;, move);</span>
<span class="fc" id="L317">    json.putOpt(&quot;copy&quot;, copy);</span>
<span class="fc" id="L318">    json.putOpt(&quot;deserialize&quot;, deserialize);</span>

<span class="fc" id="L320">    return json;</span>
  }

  @Override
  public String toString() {
<span class="pc bpc" id="L325" title="15 of 36 branches missed.">    return &quot;DataObject [objectId=&quot; + getObjectId() + &quot;, &quot;</span>
        + (objectType != null ? &quot;objectType=&quot; + objectType + &quot;, &quot; : &quot;&quot;)
        + (objectName != null ? &quot;objectName=&quot; + objectName + &quot;, &quot; : &quot;&quot;)
        + (parentUri != null ? &quot;parentUri=&quot; + parentUri + &quot;, &quot; : &quot;&quot;)
        + (parentId != null ? &quot;parentId=&quot; + parentId + &quot;, &quot; : &quot;&quot;)
        + (domainUri != null ? &quot;domainUri=&quot; + domainUri + &quot;, &quot; : &quot;&quot;)
        + (capabilitiesUri != null ? &quot;capabilitiesUri=&quot; + capabilitiesUri + &quot;, &quot; : &quot;&quot;)
        + (completionStatus != null ? &quot;completionStatus=&quot; + completionStatus + &quot;, &quot; : &quot;&quot;)
        + (percentComplete != null ? &quot;percentComplete=&quot; + percentComplete + &quot;, &quot; : &quot;&quot;)
        + (metadata != null ? &quot;metadata=&quot; + metadata + &quot;, &quot; : &quot;&quot;)
        + (mimetype != null ? &quot;mimetype=&quot; + mimetype + &quot;, &quot; : &quot;&quot;)
        + (deserializevalue != null ? &quot;deserializevalue=&quot; + deserializevalue + &quot;, &quot; : &quot;&quot;)
        + (reference != null ? &quot;reference=&quot; + reference + &quot;, &quot; : &quot;&quot;)
        + (move != null ? &quot;move=&quot; + move + &quot;, &quot; : &quot;&quot;) + (copy != null ? &quot;copy=&quot; + copy + &quot;, &quot; : &quot;&quot;)
        + (deserialize != null ? &quot;deserialize=&quot; + deserialize + &quot;, &quot; : &quot;&quot;)
        + (serialize != null ? &quot;serialize=&quot; + serialize + &quot;, &quot; : &quot;&quot;)
        + (valuetransferencoding != null ? &quot;valuetransferencoding=&quot; + valuetransferencoding + &quot;, &quot;
            : &quot;&quot;)
        + (value != null ? &quot;value=&quot; + value : &quot;&quot;) + &quot;]&quot;;
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.7.201606060606</span></div></body></html>