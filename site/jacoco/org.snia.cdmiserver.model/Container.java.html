<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Container.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">cdmi-server</a> &gt; <a href="index.source.html" class="el_package">org.snia.cdmiserver.model</a> &gt; <span class="el_source">Container.java</span></div><h1>Container.java</h1><pre class="source lang-java linenums">/*
 * Original work Copyright (c) 2010, Sun Microsystems, Inc. Copyright (c) 2010, The Storage
 * Networking Industry Association.
 *
 * Modified work Copyright (c) 2016, Karlsruhe Institute of Technology (KIT)
 * 
 * Redistribution and use in source and binary forms, with or without modification, are permitted
 * provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice, this list of conditions
 * and the following disclaimer.
 *
 * Redistributions in binary form must reproduce the above copyright notice, this list of conditions
 * and the following disclaimer in the documentation and/or other materials provided with the
 * distribution.
 *
 * Neither the name of The Storage Networking Industry Association (SNIA) nor the names of its
 * contributors may be used to endorse or promote products derived from this software without
 * specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR
 * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
 * FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
 * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY
 * WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

package org.snia.cdmiserver.model;

import org.json.JSONArray;
import org.json.JSONObject;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.snia.cdmiserver.util.MediaTypes;

/**
 * &lt;p&gt;
 * Representation of a CDMI &lt;em&gt;Container&lt;/em&gt;.
 * &lt;/p&gt;
 */
public class Container extends CdmiObject {

  @SuppressWarnings(&quot;unused&quot;)
<span class="fc" id="L47">  private static final Logger LOG = LoggerFactory.getLogger(Container.class);</span>

  private String objectType;
  private String objectName;
  private String parentUri;
  private String parentId;
  private String domainUri;
  private String capabilitiesUri;
  private String completionStatus;

  private String percentComplete;
  private JSONObject metadata;
  private JSONObject exports;
  private JSONArray snapshots;
  private String childrenrange;
  private JSONArray children;

  private String deserializevalue;
  private String reference;
  private String move;
  private String copy;
  private String deserialize;

<span class="fc" id="L70">  private Container() {}</span>

  /**
   * Creates a new container with the mandatory fields.
   * 
   * @param objectName the container's name
   * @param parentUri the container's parent URI
   * @param parentId the container's parent objectId
   */
  public Container(String objectName, String parentUri, String parentId) {
<span class="fc" id="L80">    super();</span>
<span class="fc" id="L81">    this.objectName = objectName;</span>
<span class="fc" id="L82">    this.parentUri = parentUri;</span>
<span class="fc" id="L83">    this.parentId = parentId;</span>
    // default values
<span class="fc" id="L85">    this.objectType = MediaTypes.CONTAINER;</span>
<span class="fc" id="L86">    this.domainUri = &quot;/cdmi_domains&quot;;</span>
<span class="fc" id="L87">    this.capabilitiesUri = &quot;/cdmi_capabilities/container&quot;;</span>
<span class="fc" id="L88">    this.completionStatus = &quot;Complete&quot;;</span>
<span class="fc" id="L89">    this.metadata = new JSONObject();</span>
<span class="fc" id="L90">    this.children = new JSONArray();</span>
<span class="fc" id="L91">    this.childrenrange = &quot;&quot;;</span>
<span class="fc" id="L92">  }</span>

  public String getObjectType() {
<span class="nc" id="L95">    return objectType;</span>
  }

  public void setObjectType(String objectType) {
<span class="nc" id="L99">    this.objectType = objectType;</span>
<span class="nc" id="L100">  }</span>

  public String getObjectName() {
<span class="fc" id="L103">    return objectName;</span>
  }

  public void setObjectName(String objectName) {
<span class="nc" id="L107">    this.objectName = objectName;</span>
<span class="nc" id="L108">  }</span>

  public String getParentUri() {
<span class="fc" id="L111">    return parentUri;</span>
  }

  public void setParentUri(String parentUri) {
<span class="nc" id="L115">    this.parentUri = parentUri;</span>
<span class="nc" id="L116">  }</span>

  public String getParentId() {
<span class="fc" id="L119">    return parentId;</span>
  }

  public void setParentId(String parentId) {
<span class="nc" id="L123">    this.parentId = parentId;</span>
<span class="nc" id="L124">  }</span>

  public String getDomainUri() {
<span class="nc" id="L127">    return domainUri;</span>
  }

  public void setDomainUri(String domainUri) {
<span class="nc" id="L131">    this.domainUri = domainUri;</span>
<span class="nc" id="L132">  }</span>

  public String getCapabilitiesUri() {
<span class="nc" id="L135">    return capabilitiesUri;</span>
  }

  public void setCapabilitiesUri(String capabilitiesUri) {
<span class="fc" id="L139">    this.capabilitiesUri = capabilitiesUri;</span>
<span class="fc" id="L140">  }</span>

  public String getCompletionStatus() {
<span class="nc" id="L143">    return completionStatus;</span>
  }

  public void setCompletionStatus(String completionStatus) {
<span class="fc" id="L147">    this.completionStatus = completionStatus;</span>
<span class="fc" id="L148">  }</span>

  public String getPercentComplete() {
<span class="nc" id="L151">    return percentComplete;</span>
  }

  public void setPercentComplete(String percentComplete) {
<span class="nc" id="L155">    this.percentComplete = percentComplete;</span>
<span class="nc" id="L156">  }</span>

  public JSONObject getMetadata() {
<span class="fc" id="L159">    return metadata;</span>
  }

  public void setMetadata(JSONObject metadata) {
<span class="fc" id="L163">    this.metadata = metadata;</span>
<span class="fc" id="L164">  }</span>

  public JSONObject getExports() {
<span class="nc" id="L167">    return exports;</span>
  }

  public void setExports(JSONObject exports) {
<span class="nc" id="L171">    this.exports = exports;</span>
<span class="nc" id="L172">  }</span>

  public JSONArray getSnapshots() {
<span class="nc" id="L175">    return snapshots;</span>
  }

  public void setSnapshots(JSONArray snapshots) {
<span class="nc" id="L179">    this.snapshots = snapshots;</span>
<span class="nc" id="L180">  }</span>

  public String getChildrenrange() {
<span class="fc" id="L183">    return childrenrange;</span>
  }

  public void setChildrenrange(String childrenrange) {
<span class="fc" id="L187">    this.childrenrange = childrenrange;</span>
<span class="fc" id="L188">  }</span>

  public JSONArray getChildren() {
<span class="fc" id="L191">    return children;</span>
  }

  public void setChildren(JSONArray children) {
<span class="fc" id="L195">    this.children = children;</span>
<span class="fc" id="L196">  }</span>

  public String getDeserializedvalue() {
<span class="nc" id="L199">    return deserializevalue;</span>
  }

  public void setDeserializedvalue(String deserializevalue) {
<span class="nc" id="L203">    this.deserializevalue = deserializevalue;</span>
<span class="nc" id="L204">  }</span>

  public String getReference() {
<span class="nc" id="L207">    return reference;</span>
  }

  public void setReference(String reference) {
<span class="nc" id="L211">    this.reference = reference;</span>
<span class="nc" id="L212">  }</span>

  public String getMove() {
<span class="nc" id="L215">    return move;</span>
  }

  public void setMove(String move) {
<span class="nc" id="L219">    this.move = move;</span>
<span class="nc" id="L220">  }</span>

  public String getCopy() {
<span class="nc" id="L223">    return copy;</span>
  }

  public void setCopy(String copy) {
<span class="nc" id="L227">    this.copy = copy;</span>
<span class="nc" id="L228">  }</span>

  public String getDeserialize() {
<span class="nc" id="L231">    return deserialize;</span>
  }

  public void setDeserialize(String deserialize) {
<span class="nc" id="L235">    this.deserialize = deserialize;</span>
<span class="nc" id="L236">  }</span>

  /**
   * Deserializes a container from the given JSON object.
   * 
   * @param json a {@link JSONObject}
   */
  public static Container fromJson(JSONObject json) {
<span class="fc" id="L244">    Container container = new Container();</span>

<span class="fc bfc" id="L246" title="All 2 branches covered.">    if (json.has(&quot;objectID&quot;)) {</span>
<span class="fc" id="L247">      container.setObjectId(json.optString(&quot;objectID&quot;));</span>
    }
<span class="fc bfc" id="L249" title="All 2 branches covered.">    if (json.has(&quot;objectName&quot;)) {</span>
<span class="fc" id="L250">      container.objectName = json.optString(&quot;objectName&quot;);</span>
    }
<span class="fc bfc" id="L252" title="All 2 branches covered.">    if (json.has(&quot;parentURI&quot;)) {</span>
<span class="fc" id="L253">      container.parentUri = json.optString(&quot;parentURI&quot;);</span>
    }
<span class="fc bfc" id="L255" title="All 2 branches covered.">    if (json.has(&quot;parentID&quot;)) {</span>
<span class="fc" id="L256">      container.parentId = json.optString(&quot;parentID&quot;);</span>
    }
    // default values
<span class="fc" id="L259">    container.objectType = MediaTypes.CONTAINER;</span>

<span class="fc" id="L261">    container.domainUri = json.optString(&quot;domainURI&quot;, &quot;/cdmi_domains&quot;);</span>
<span class="fc" id="L262">    container.capabilitiesUri = json.optString(&quot;capabilitiesURI&quot;, &quot;/cdmi_capabilities/container&quot;);</span>
<span class="fc" id="L263">    container.completionStatus = json.optString(&quot;completionStatus&quot;, &quot;Processing&quot;);</span>
<span class="fc" id="L264">    container.metadata = json.optJSONObject(&quot;metadata&quot;);</span>
<span class="fc bfc" id="L265" title="All 2 branches covered.">    if (container.metadata == null) {</span>
<span class="fc" id="L266">      container.metadata = new JSONObject();</span>
    }
    // optional values
<span class="pc bpc" id="L269" title="1 of 2 branches missed.">    if (json.has(&quot;percentComplete&quot;)) {</span>
<span class="nc" id="L270">      container.percentComplete = json.optString(&quot;percentComplete&quot;);</span>
    }
<span class="pc bpc" id="L272" title="1 of 2 branches missed.">    if (json.has(&quot;exports&quot;)) {</span>
<span class="nc" id="L273">      container.exports = json.optJSONObject(&quot;exports&quot;);</span>
    }
<span class="pc bpc" id="L275" title="1 of 2 branches missed.">    if (json.has(&quot;snapshots&quot;)) {</span>
<span class="nc" id="L276">      container.snapshots = json.optJSONArray(&quot;snapshots&quot;);</span>
    }
<span class="fc bfc" id="L278" title="All 2 branches covered.">    if (json.has(&quot;childrenrange&quot;)) {</span>
<span class="fc" id="L279">      container.childrenrange = json.optString(&quot;childrenrange&quot;);</span>
    }
<span class="fc bfc" id="L281" title="All 2 branches covered.">    if (json.has(&quot;children&quot;)) {</span>
<span class="fc" id="L282">      container.children = json.optJSONArray(&quot;children&quot;);</span>
    }
<span class="pc bpc" id="L284" title="1 of 2 branches missed.">    if (json.has(&quot;deserializevalue&quot;)) {</span>
<span class="nc" id="L285">      container.deserializevalue = json.optString(&quot;deserializevalue&quot;);</span>
    }
<span class="pc bpc" id="L287" title="1 of 2 branches missed.">    if (json.has(&quot;reference&quot;)) {</span>
<span class="nc" id="L288">      container.reference = json.optString(&quot;reference&quot;);</span>
    }
<span class="pc bpc" id="L290" title="1 of 2 branches missed.">    if (json.has(&quot;move&quot;)) {</span>
<span class="nc" id="L291">      container.move = json.optString(&quot;move&quot;);</span>
    }
<span class="pc bpc" id="L293" title="1 of 2 branches missed.">    if (json.has(&quot;copy&quot;)) {</span>
<span class="nc" id="L294">      container.copy = json.optString(&quot;copy&quot;);</span>
    }
<span class="pc bpc" id="L296" title="1 of 2 branches missed.">    if (json.has(&quot;deserialize&quot;)) {</span>
<span class="nc" id="L297">      container.deserialize = json.optString(&quot;deserialize&quot;);</span>
    }

<span class="fc" id="L300">    return container;</span>
  }

  @Override
  public JSONObject toJson() {
<span class="fc" id="L305">    JSONObject json = super.toJson();</span>

<span class="fc" id="L307">    json.putOpt(&quot;objectType&quot;, objectType);</span>
<span class="fc" id="L308">    json.putOpt(&quot;objectName&quot;, objectName);</span>
<span class="fc" id="L309">    json.putOpt(&quot;parentURI&quot;, parentUri);</span>
<span class="fc" id="L310">    json.putOpt(&quot;parentID&quot;, parentId);</span>
<span class="fc" id="L311">    json.putOpt(&quot;domainURI&quot;, domainUri);</span>
<span class="fc" id="L312">    json.putOpt(&quot;capabilitiesURI&quot;, capabilitiesUri);</span>
<span class="fc" id="L313">    json.putOpt(&quot;completionStatus&quot;, completionStatus);</span>
<span class="fc" id="L314">    json.putOpt(&quot;percentComplete&quot;, percentComplete);</span>
<span class="fc" id="L315">    json.putOpt(&quot;metadata&quot;, metadata);</span>
<span class="fc" id="L316">    json.putOpt(&quot;exports&quot;, exports);</span>
<span class="fc" id="L317">    json.putOpt(&quot;snapshots&quot;, snapshots);</span>
<span class="fc" id="L318">    json.putOpt(&quot;childrenrange&quot;, childrenrange);</span>
<span class="fc" id="L319">    json.putOpt(&quot;children&quot;, children);</span>
<span class="fc" id="L320">    json.putOpt(&quot;deserializevalue&quot;, deserializevalue);</span>
<span class="fc" id="L321">    json.putOpt(&quot;reference&quot;, reference);</span>
<span class="fc" id="L322">    json.putOpt(&quot;move&quot;, move);</span>
<span class="fc" id="L323">    json.putOpt(&quot;copy&quot;, copy);</span>
<span class="fc" id="L324">    json.putOpt(&quot;deserialize&quot;, deserialize);</span>

<span class="fc" id="L326">    return json;</span>
  }

  @Override
  public String toString() {
<span class="pc bpc" id="L331" title="13 of 36 branches missed.">    return &quot;Container [objectId=&quot; + getObjectId() + &quot;, &quot;</span>
        + (objectType != null ? &quot;objectType=&quot; + objectType + &quot;, &quot; : &quot;&quot;)
        + (objectName != null ? &quot;objectName=&quot; + objectName + &quot;, &quot; : &quot;&quot;)
        + (parentUri != null ? &quot;parentUri=&quot; + parentUri + &quot;, &quot; : &quot;&quot;)
        + (parentId != null ? &quot;parentId=&quot; + parentId + &quot;, &quot; : &quot;&quot;)
        + (domainUri != null ? &quot;domainUri=&quot; + domainUri + &quot;, &quot; : &quot;&quot;)
        + (capabilitiesUri != null ? &quot;capabilitiesUri=&quot; + capabilitiesUri + &quot;, &quot; : &quot;&quot;)
        + (completionStatus != null ? &quot;completionStatus=&quot; + completionStatus + &quot;, &quot; : &quot;&quot;)
        + (percentComplete != null ? &quot;percentComplete=&quot; + percentComplete + &quot;, &quot; : &quot;&quot;)
        + (metadata != null ? &quot;metadata=&quot; + metadata + &quot;, &quot; : &quot;&quot;)
        + (exports != null ? &quot;exports=&quot; + exports + &quot;, &quot; : &quot;&quot;)
        + (snapshots != null ? &quot;snapshots=&quot; + snapshots + &quot;, &quot; : &quot;&quot;)
        + (childrenrange != null ? &quot;childrenrange=&quot; + childrenrange + &quot;, &quot; : &quot;&quot;)
        + (children != null ? &quot;children=&quot; + children + &quot;, &quot; : &quot;&quot;)
        + (deserializevalue != null ? &quot;deserializevalue=&quot; + deserializevalue + &quot;, &quot; : &quot;&quot;)
        + (reference != null ? &quot;reference=&quot; + reference + &quot;, &quot; : &quot;&quot;)
        + (move != null ? &quot;move=&quot; + move + &quot;, &quot; : &quot;&quot;) + (copy != null ? &quot;copy=&quot; + copy + &quot;, &quot; : &quot;&quot;)
        + (deserialize != null ? &quot;deserialize=&quot; + deserialize : &quot;&quot;) + &quot;]&quot;;
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.7.201606060606</span></div></body></html>